<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>Weird random notes (dhcpd)</title><link>https://andir.github.io/</link><description></description><atom:link type="application/rss+xml" rel="self" href="https://andir.github.io/categories/dhcpd.xml"></atom:link><language>en</language><lastBuildDate>Mon, 23 May 2016 11:08:13 GMT</lastBuildDate><generator>https://getnikola.com/</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Using multiple client classes with ISC DHCPd</title><link>https://andir.github.io/posts/isc-dhcpd-multiple-classes/</link><dc:creator>Andreas Rammhold</dc:creator><description>&lt;div&gt;&lt;p&gt;Since the internet is lacking examples of how to use multiple classes with a single pool here is one:&lt;/p&gt;
&lt;pre class="code nginx"&gt;&lt;a name="rest_code_b8853d5ee6af487598cdc8735a112014-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="s"&gt;"mac-filtered-clients"&lt;/span&gt;
&lt;a name="rest_code_b8853d5ee6af487598cdc8735a112014-2"&gt;&lt;/a&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_b8853d5ee6af487598cdc8735a112014-3"&gt;&lt;/a&gt;    &lt;span class="kn"&gt;match&lt;/span&gt; &lt;span class="s"&gt;binary-to-ascii&lt;/span&gt; &lt;span class="s"&gt;(16,&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="s"&gt;,&lt;/span&gt; &lt;span class="s"&gt;":",&lt;/span&gt; &lt;span class="s"&gt;substring(hardware,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="s"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="s"&gt;))&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_b8853d5ee6af487598cdc8735a112014-4"&gt;&lt;/a&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_b8853d5ee6af487598cdc8735a112014-5"&gt;&lt;/a&gt;
&lt;a name="rest_code_b8853d5ee6af487598cdc8735a112014-6"&gt;&lt;/a&gt;&lt;span class="k"&gt;subclass&lt;/span&gt; &lt;span class="s"&gt;"mac-filtered-clients"&lt;/span&gt; &lt;span class="s"&gt;"50:7b:00:00:00:00"&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;# some cool host!&lt;/span&gt;
&lt;a name="rest_code_b8853d5ee6af487598cdc8735a112014-7"&gt;&lt;/a&gt;
&lt;a name="rest_code_b8853d5ee6af487598cdc8735a112014-8"&gt;&lt;/a&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="s"&gt;"J-client"&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_b8853d5ee6af487598cdc8735a112014-9"&gt;&lt;/a&gt;    &lt;span class="kn"&gt;spawn&lt;/span&gt; &lt;span class="s"&gt;with&lt;/span&gt; &lt;span class="s"&gt;option&lt;/span&gt; &lt;span class="s"&gt;agent.circuit-id&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_b8853d5ee6af487598cdc8735a112014-10"&gt;&lt;/a&gt;    &lt;span class="kn"&gt;match&lt;/span&gt; &lt;span class="s"&gt;if&lt;/span&gt; &lt;span class="s"&gt;(substring(option&lt;/span&gt; &lt;span class="s"&gt;agent.circuit-id,&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="s"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="s"&gt;)&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s"&gt;"foo-bar")&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_b8853d5ee6af487598cdc8735a112014-11"&gt;&lt;/a&gt;    &lt;span class="kn"&gt;lease&lt;/span&gt; &lt;span class="s"&gt;limit&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_b8853d5ee6af487598cdc8735a112014-12"&gt;&lt;/a&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_b8853d5ee6af487598cdc8735a112014-13"&gt;&lt;/a&gt;
&lt;a name="rest_code_b8853d5ee6af487598cdc8735a112014-14"&gt;&lt;/a&gt;&lt;span class="k"&gt;subnet&lt;/span&gt; &lt;span class="mi"&gt;192&lt;/span&gt;&lt;span class="s"&gt;.168.0.0&lt;/span&gt; &lt;span class="mi"&gt;255&lt;/span&gt;&lt;span class="s"&gt;.255.0.0&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_b8853d5ee6af487598cdc8735a112014-15"&gt;&lt;/a&gt;     &lt;span class="kn"&gt;pool&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_b8853d5ee6af487598cdc8735a112014-16"&gt;&lt;/a&gt;          &lt;span class="kn"&gt;range&lt;/span&gt; &lt;span class="mi"&gt;192&lt;/span&gt;&lt;span class="s"&gt;.168.0.10&lt;/span&gt; &lt;span class="mi"&gt;192&lt;/span&gt;&lt;span class="s"&gt;.168.0.150&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_b8853d5ee6af487598cdc8735a112014-17"&gt;&lt;/a&gt;          &lt;span class="kn"&gt;allow&lt;/span&gt; &lt;span class="s"&gt;members&lt;/span&gt; &lt;span class="s"&gt;of&lt;/span&gt; &lt;span class="s"&gt;"J-client"&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_b8853d5ee6af487598cdc8735a112014-18"&gt;&lt;/a&gt;          &lt;span class="kn"&gt;allow&lt;/span&gt; &lt;span class="s"&gt;members&lt;/span&gt; &lt;span class="s"&gt;of&lt;/span&gt; &lt;span class="s"&gt;"mac-filtered-clients"&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_b8853d5ee6af487598cdc8735a112014-19"&gt;&lt;/a&gt;     &lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_b8853d5ee6af487598cdc8735a112014-20"&gt;&lt;/a&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;This isn't very special compared to a setup with just a single class but it can be confusing since debugging classes is a pita.. One pitfall I did run into was using the byte representation of the mac-addresses (without the quotes) and using &lt;code&gt;match hardware;&lt;/code&gt;. The example above works for me (tm).&lt;/p&gt;&lt;/div&gt;</description><category>dhcpd</category><category>isc</category><guid>https://andir.github.io/posts/isc-dhcpd-multiple-classes/</guid><pubDate>Mon, 23 May 2016 11:00:00 GMT</pubDate></item></channel></rss>